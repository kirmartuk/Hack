(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["requests"],{2336:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"requests"},[a("h3",[e._v("Заявки новых владельцев")]),a("div",{staticClass:"requests__params"},[a("el-row",{staticClass:"requests__filter-row",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{clearable:"",placeholder:"Приют"},model:{value:e.shelter,callback:function(t){e.shelter=t},expression:"shelter"}},e._l(e.shelterOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.shortName,value:e.shortName}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{clearable:"",placeholder:"Статус"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.params.requestStatuses,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("Искать")])],1)],1)],1),a("div",{staticClass:"requests__list-wrapper"},[e.requestsList.length>0?a("ul",{staticClass:"requests__list",attrs:{"infinite-scroll-disabled":"infiniteScrollDisabled"}},[e._v(" фывы "),e._l(e.requestsList,(function(e,t){return a("v-request-item",{key:t,attrs:{request:e}})}))],2):e._e(),e.loading?a("p",{staticClass:"requests__list-info"},[a("i",{staticClass:"el-icon-loading"}),e._v(" Загрузка...")]):e._e(),e.isAllLoaded?a("p",{staticClass:"requests__list-info"},[e._v("Все данные загружены")]):e._e()])])},l=[],i=a("5530"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse",{staticClass:"request-item"},[a("el-collapse-item",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("template",{slot:"title"},[a("span",{class:"request-item__status request-item__status--"+e.status},[e._v(e._s(e.status)+" ")]),a("span",{staticClass:"request-item__title"},[e._v(" Запрос № "+e._s(e.request.id)+" ")]),a("span",{staticClass:"request-item__key"},[e._v("Интересующее животное:")]),a("span",{staticClass:"request"},[e._v(e._s(e.animalData))])]),a("el-row",[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"request-item__key"},[e._v("Имя:")]),a("span",{staticClass:"request-item__value"},[e._v(e._s(e.request.name))])]),a("el-col",{attrs:{span:4}},[a("span",{staticClass:"request-item__key"},[e._v("Телефон:")]),a("span",{staticClass:"request-item__value"},[e._v(e._s(e.request.phone))])])],1),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:e.dodecline}},[e._v("Отклонить")])],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.doaccept}},[e._v("Одобрить")])],1)],1)],2)],1)},r=[],u=(a("4795"),{name:"VRequestItem",props:{request:{type:Object,required:!0}},data:function(){return{loading:!1,status:"new"}},computed:{requestStatus:function(){var e={new:"Новая",declined:"Отклонена",accepted:"Принята"};return e[this.request.status]},animalData:function(){return"Собака, id: ".concat(this.request.id)}},methods:{dodecline:function(){var e=this;this.loading=!0,setTimeout((function(){e.status="declined",e.loading=!1,e.$notify({title:"Заявка отклонена",type:"warning"})}),1e3)},doaccept:function(){var e=this;this.loading=!0,setTimeout((function(){e.status="approved",e.loading=!1,e.$notify({title:"Заявка отклонена",type:"success"})}),1e3)}}}),o=u,c=(a("b401"),a("2877")),d=Object(c["a"])(o,n,r,!1,null,null,null),p=d.exports,_=a("c631"),m=a("03db"),v=a("b8d8"),h={name:"Requests",components:{VRequestItem:p},data:function(){return{params:v,shelter:null,status:null}},computed:{shelterOptions:function(){return this.$store.state[_["a"]].list},module:function(){return this.$store.state[m["b"]]},requestsList:function(){return this.module.list},loading:function(){return this.module.loading},isAllLoaded:function(){return!this.loading&&this.module.params.offset===this.module.params.count},infiniteScrollDisabled:function(){return this.loading||this.isAllLoaded}},created:function(){this.fetch()},methods:{fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.shelter,a=this.status;this.$store.dispatch(m["a"],Object(i["a"])({shelter:t,status:a},e))},search:function(){this.fetch({offset:0})}}},f=h,b=(a("cfaa"),Object(c["a"])(f,s,l,!1,null,null,null));t["default"]=b.exports},"42fb":function(e,t,a){},b401:function(e,t,a){"use strict";a("42fb")},b8d8:function(e){e.exports=JSON.parse('{"documentTypes":[{"label":"Акт отлова","value":"1"},{"label":"Акт осмотра","value":"2"},{"label":"Акт приема-передачи","value":"3"}],"animalCategories":[{"value":1,"label":"Собака"},{"value":2,"label":"Кошка"}],"sexOptions":[{"value":"male","label":"Мальчик","icon":"el-icon-male"},{"value":"female","label":"Девочка","icon":"el-icon-female"}],"ageOptions":[{"value":1,"label":"Молодые ( < 2 лет )"},{"value":2,"label":"Взрослые ( 2-7 лет )"},{"value":3,"label":"Пожелые ( > 7 лет )"}],"sizeOptions":[{"value":"small","label":"Малый"},{"value":"medium","label":"Средний"},{"value":"large","label":"Крупный"}],"requestStatuses":[{"value":"new","label":"Новая"},{"value":"pending","label":"В рассмотрении"},{"value":"approved","label":"Одобрена"},{"value":"canceled","label":"Отклонено"}],"eventTypes":[{"value":"Вакцинация"},{"value":"Чипирование"},{"value":"Обработка от эндопаразитов"},{"value":"Обработка от эктопаразитов"},{"value":"Стерилизация"},{"value":"Акт осмотра"},{"value":"Акт отлова"},{"value":"Акт приема-передачи"}],"exitTypes":["Передача владельцам","Смерть"],"shelters":[{"id":1,"global_id":1699129,"name":"Приют для бродячих животных № 1","adm_area":"Восточный административный округ","district":"район Вешняки","address":"город Москва, Рассветная аллея, дом 10","phone":"(909) 918-59-23","chief_name":"Дружинин Алексей Михайлович"},{"id":2,"global_id":1699130,"name":"Приют для бродячих животных № 4","adm_area":"Зеленоградский административный округ","district":"район Матушкино","address":"город Москва, город Зеленоград, Фирсановское шоссе, владение 5А","phone":"(909) 918-59-24","chief_name":"Игнатов Алексей Васильевич"},{"id":3,"global_id":61896897,"name":"Приют для безнадзорных животных","adm_area":"Западный административный округ","district":"район Солнцево","address":"город Москва, Родниковая улица, дом 22, строение 1","phone":"(495) 783-26-04","chief_name":"Архипова Е П"},{"id":4,"global_id":167604457,"name":"Приют для содержания безнадзорных и бесхозяйных животных № 12 Юго-Восточного административного округа","adm_area":"Юго-Восточный административный округ","district":"район Некрасовка","address":"город Москва, 2-я Вольская улица, дом 17А, строение 3","phone":"(909) 918-59-23","chief_name":"Тушов Денис Владимирович"},{"id":5,"global_id":1699129,"name":"Приют для бродячих животных № 1","adm_area":"Восточный административный округ","district":"район Вешняки","address":"город Москва, Рассветная аллея, дом 10","phone":"(909) 918-59-23","chief_name":"Дружинин Алексей Михайлович"},{"id":6,"global_id":1699130,"name":"Приют для бродячих животных № 4","adm_area":"Зеленоградский административный округ","district":"район Матушкино","address":"город Москва, город Зеленоград, Фирсановское шоссе, владение 5А","phone":"(909) 918-59-24","chief_name":"Игнатов Алексей Васильевич"},{"id":7,"global_id":61896897,"name":"Приют для безнадзорных животных","adm_area":"Западный административный округ","district":"район Солнцево","address":"город Москва, Родниковая улица, дом 22, строение 1","phone":"(495) 783-26-04","chief_name":"Архипова Е П"},{"id":8,"global_id":167604457,"name":"Приют для содержания безнадзорных и бесхозяйных животных № 12 Юго-Восточного административного округа","adm_area":"Юго-Восточный административный округ","district":"район Некрасовка","address":"город Москва, 2-я Вольская улица, дом 17А, строение 3","phone":"(909) 918-59-23","chief_name":"Тушов Денис Владимирович"}]}')},c8a0:function(e,t,a){},cfaa:function(e,t,a){"use strict";a("c8a0")}}]);
//# sourceMappingURL=requests.d3d556cc.js.map